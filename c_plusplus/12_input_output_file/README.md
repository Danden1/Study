# 입력, 출력, 파일

## 스트림,버퍼

c++프로그램은 입력과 출력을 바이트의 흐름(스트림)이라고 간주

입력 시 프로그램은 입력 스트림으로부터 바이트 추출, 출력시 스트림에 바이트 삽입

텍스트 기반을 바이트는 문자 나타냄



입력 스트림의 바이트는 키보드, 저장장치, 다른 프로그램으로부터 올 수 있음.

스트림은 매개자 역할



입력 다루려면 2가지 절차 필요

- 하나의 스트림을 입력에 연결

- 그 스트림을 파일에 연결

버퍼 이용시 효율적으로 처리 가능

정보 전송하기 위해 임시 저장 장치로 활용하는 메모리 블록

파일은 1바이트 씩 다룸

버퍼는 한 번에 많은 데이터 읽어, 저장 해둠

프로그램은 버퍼로부터 1문자씩 읽음. 메모리로부터 읽는 것이 더 빠름

다음 번 출력 위해 버퍼 비움



c++프로그램은 개행문자 전달 받으면 버퍼 비움

## cout 이용한 출력

### 출력 버퍼 비우기

cout 객체가 다루는 출력에 버퍼 사용

-> 출력이 즉시 목적지로 보내지 않고, 버퍼 가득 찰 때까지 쌓임

화면 출력에는 이런 방식 비효율적.

-> 기다리지 않음

개행 문자 보내면 자동으로 비워짐

endl는 버퍼 비우고 개행문자 삽입

flush는 버퍼 비움



## cin 이용 입력

cin 객체는 입력 스트림으로부터 문자 차례로 꺼냄.

### cin >>은 입력  어떻게?

int n;

cin >> n; //12a

1,2,읽고, a는 입력스트림에 남겨짐



## 파일 입출력

### 간단한 입출력

파일에 기록하게 하려면, 다음 작업 필요

1. 출력스트림 관리 위해 ofstream 객체 생성

2. 이걸 하나의 스트림에 연결

3. cout처럼 객체 사용. 출력이 파일로 감.

fstream 헤더 팡리 필요

ofstream fout;

fout.open("test.txt"); //ofstream fout("test.txt");

fout << "HI"; //파일에 기록



그 이름 가진 파일 없으면, 새로운 파일 생성. 있으면, 내용 비우고 새로 시작.



파일 읽으려면,

1. 입력 스트림 관리 위한 ifstream 객체 생성

2. 이걸 하나의 파일에 연결

3. cin처럼 사용

ifstream fin("t.txt');

char ch;

fin >> ch; //한 글자 읽음

char buf[10];

fin >> buf; //한 단어 읽음

fin.getline(buf, 10); //한 행

string line;

getline(fin, line); //문자열 객체에 읽음



입력 스트림 객체와 출력 스트림 객체 수명 다하면, 연결은 자동으로 닫힘.

fout.close();

fin.close(); //명시적으로 닫음



### 스틀미 검사, is_open()

fin.open("test.txt");

fin.fail(); !fin; !fine.is_open();

으로 파일 열렸는지 검사 가능



### 파일 모드

파일 사용방법 나타냄

open()메서드 이용시, 파일 모드 지정한느 2번째 매개변수 사용 가능

ios_base::in  읽기

ios_base::out 쓰기

ios_base::ate 파일열 때, 끝 찾음

ios_base::app 덧붙임

ios_base::trunc 파일존재, 내용 비움

ios_base::binary 2진 파일

fstream객체로 입출력 둘다 가능

비트별 or연산자(|)사용, 두 개 하나로 결합




### 임의 접근

직접 그 위치로 이동 뜻함.

seekg()는 입력 포인터를 주어진 위치로 옮김

seekp()는 출력 포인터를 주어진 위치로 옮김.

fin. seekg(10,ios_base::beg); //시작으로부터 10byte

fin.seekg(-1,ios_base::cur); //뒤로 1바이트

fine.seekg(0, ios::end); //끝



fin.seekg(10); //파일 포인터를 바이트 10에 우ㅐㅣ치 시킴

입력은 tellg(), 출력은 tellp()로 현재위치 알 수 있음

if(fin.open())

  fin.clear(); //eof플래그 해제

파일 전체 읽고 eofbit설정

파일 처리 끝냈으니 더 이상 파일에 읽거나 쓰지 못하게 함.
